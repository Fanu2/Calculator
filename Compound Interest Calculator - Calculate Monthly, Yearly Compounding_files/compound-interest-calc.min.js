window.addEventListener("load",windowLoadCallback);var domElem,period,chart,chartConfig,interest=10,tenure=10,principal=5e5,selectedPeriod="Yearly",investmentType="One-time",compoundAmount=88117,compoundInterest=38117,compoundInterval=1,isInflation=!1,inflationRate=4,graphTenure=30,leftPaddingPercentage=42;function windowLoadCallback(){domElem={amountElem:document.querySelector('input[name="amount"]'),interestElem:document.querySelector('input[name="interest"]'),TimePeriod:document.querySelector('input[name="period"]'),invesdtedAmount:document.querySelector("#invesdtedAmount span"),InterestGain:document.querySelector("#InterestGain span"),maturityAmount:document.querySelector("#maturityAmount span"),graphBody:document.querySelector(".graph-content"),yearProp:document.querySelector(".input-prop.year"),percentageProp:document.querySelector(".input-prop.percentage")},window.outerWidth<991&&(leftPaddingPercentage=40),setAllSliders(),createChart(),updateOutput(),createTable(),document.getElementById("calculate").addEventListener("click",function(e){allInputvalid()&&(domElem.InterestGain.setAttribute("data-prevalue",Math.round(compoundInterest/3)),domElem.maturityAmount.setAttribute("data-prevalue",Math.round(compoundAmount/3)),updateOutput(),window.outerWidth<991)&&$("html, body").animate({scrollTop:$(".calculation-result").offset().top-60},500),trackCustomGa4Event("CTA click",{click_text:this.innerText})}),$(".calci-radio-btn-inflation, .calci-radio-btn-inflation-xs").click(function(e){var t=$(this).parent().siblings(".inf-label").text();this.previous&&(this.checked=!1),this.previous=this.checked,this.checked?(isInflation=!0,$(".inflation-box").removeClass("hide"),trackCustomGa4Event("toggle",{click_text:t+" - Yes"})):(isInflation=!1,$(".inflation-box").addClass("hide"),trackCustomGa4Event("toggle",{click_text:t+" - No"})),updateOutput()}),document.querySelectorAll(".inflation-values li").forEach(function(e){e.addEventListener("click",function(e){inflationRate=e.target.innerText.replace(/[^0-9]/g,""),document.querySelector(".inflation-values li.active").classList.remove("active"),e.target.classList.add("active"),updateOutput(),trackCustomGa4Event("value capsule click",{click_text:this.innerText})})}),document.querySelectorAll(".mf-switch li").forEach(function(e){e.addEventListener("click",function(e){("Graph"==e.target.innerText?($(".table-content").addClass("hide"),$(".graph-content")):($(".graph-content").addClass("hide"),$(".table-content"))).removeClass("hide"),$(".mf-switch li.active").removeClass("active"),e.target.classList.add("active"),trackCustomGa4Event("toggle",{click_text:this.innerText})})}),$(".card-cta a").on("click",function(e){trackCustomGa4Event("CTA click",{click_text:e.target.innerText,click_link:e.target.href})}),$("#invest_nps").on("click",function(e){trackCustomGa4Event("CTA click",{click_text:e.target.innerText,click_link:e.target.href})})}let INVESTMENTPERIOD={MONTHLY:"Monthly",QUARTERLY:"Quarterly",YEARLY:"Yearly"};function calculateMaturityAmount(){isInflation&&(interest=100*((1+interest/100)/(1+parseInt(inflationRate)/100)-1));var t=principal,a=parseFloat(interest/100),e=selectedPeriod==INVESTMENTPERIOD.YEARLY?1:selectedPeriod==INVESTMENTPERIOD.QUARTERLY?4:selectedPeriod==INVESTMENTPERIOD.MONTHLY?12:365,n=tenure;let r=0;if("One-time"==investmentType)r=t*Math.pow(1+a/e,e*n);else{var i=12*tenure;if(selectedPeriod==INVESTMENTPERIOD.YEARLY)for(let e=0;e<i;e++){var o=e+1;r+=t*Math.pow(+a+1,o/12)}else if(selectedPeriod==INVESTMENTPERIOD.QUARTERLY)for(let e=0;e<4*tenure*12;e++){var l=e+1;l%4==0&&(r+=t*Math.pow(1+a/4,l/12))}else{var c=parseFloat(interest/100)/12,e=parseInt(12*n),n=Math.pow(1+c,e);r=t*(n-1)*((1+c)/c)}}return isInflation&&(console.log("inflationRate",inflationRate),e=100*((1+interest/100)/(1+parseInt(inflationRate)/100)-1),console.log("IAR",e)),r}function updateChart(){outputContainer&&(outputContainer.classList.remove("overlay"),calculateBtn.classList.remove("cta-primary"));var r=[],i=[],o=[],l=[],c=[],s=parseFloat(interest)/100;let d=selectedPeriod==INVESTMENTPERIOD.YEARLY?1:selectedPeriod==INVESTMENTPERIOD.QUARTERLY?4:selectedPeriod==INVESTMENTPERIOD.MONTHLY?12:365;(window.outerWidth<991||10<tenure)&&(graphTenure=tenure),991<window.outerWidth&&tenure<11&&(graphTenure=10);var u=0;for(let n=0;n<graphTenure;n++){c.push(n+1+"Y");var p=n+1,m=n+1;let t=0,e=0,a=0;if("One-time"==investmentType)a=principal,t=principal*Math.pow(1+s/d,d*p),e=t-principal;else{a=principal*(12*m);var E=principal,v=12*m;if(selectedPeriod==INVESTMENTPERIOD.YEARLY)for(let e=0;e<v;e++){var h=e+1;t+=E*Math.pow(1+s,h/12)}else if(selectedPeriod==INVESTMENTPERIOD.QUARTERLY)for(let e=0;e<4*m*12;e++){var T=e+1;T%4==0&&(t+=E*Math.pow(1+s/4,T/12))}else{var p=parseFloat(interest/100)/12,f=(d=parseInt(12*m),Math.pow(1+p,d));t=E*(f-1)*((1+p)/p)}e=t-principal*(12*m)}n+1==graphTenure&&(u=t),n+1<=tenure?(r.push(parseFloat(a)),o.push(e),i.push("#F4F7FF"),l.push("#6880C8")):(r.push(parseFloat(a)+e),i.push("#DDDDDD"),l.push("#BFBFBF"))}chartConfig.data.labels=c,chartConfig.data.datasets=[{label:"Total invested",data:r,backgroundColor:i},{label:"Interest",data:o,backgroundColor:l}];var t=u;t&&(e=(e=Math.round(t/3)+"")[0]*Math.pow(10,e.length-1)),chartConfig.options.scales.yAxes[0].ticks.stepSize=e,window.chart.update()}function updateOutput(){interest=domElem.interestElem.value,tenure=+domElem.TimePeriod.value,allInputvalid()&&(principal=+domElem.amountElem.dataset.value.replace(/[^0-9]/g,""),compoundAmount=calculateMaturityAmount(),compoundInterest=("One-time"==investmentType?compoundAmount-principal:compoundAmount-principal*(12*tenure)).toFixed(2),domElem.invesdtedAmount.innerText="One-time"==investmentType?convertToLacsAndCrores(principal):convertToLacsAndCrores(principal*(12*tenure)),updateChart(),createTable(),"function"==typeof animateOutput?(domElem.InterestGain.setAttribute("data-value",compoundInterest),domElem.InterestGain.classList.add("count"),domElem.maturityAmount.setAttribute("data-value",compoundAmount),domElem.maturityAmount.classList.add("count"),animateOutput(300)):(domElem.InterestGain.innerText=convertToLacsAndCrores(compoundInterest),domElem.maturityAmount.innerText=convertToLacsAndCrores(compoundAmount)))}function updateResult(){updateOutput()}function createChart(){outputContainer&&(outputContainer.classList.remove("overlay"),calculateBtn.classList.remove("cta-primary")),chart&&chart.destroy&&chart.destroy();var t=document.getElementById("myChart").getContext("2d"),a=[],n=[],r=[],i=[],o=[],l=0,c=parseFloat(interest)/100,s=selectedPeriod==INVESTMENTPERIOD.YEARLY?1:selectedPeriod==INVESTMENTPERIOD.QUARTERLY?4:selectedPeriod==INVESTMENTPERIOD.MONTHLY?12:365;(window.outerWidth<991||30<tenure)&&(graphTenure=tenure);for(let e=0;e<graphTenure;e++){a.push(e+1+"Y");var d=e+1,d=principal*Math.pow(1+c/s,s*d),u=d-principal;e+1<=tenure?(n.push(principal),i.push(u.toFixed()),r.push("#F4F7FF"),o.push("#6880C8")):(n.push((principal+u).toFixed()),r.push("#DDDDDD"),o.push("#BFBFBF")),e+1==graphTenure&&(l=d)}var p=l,p=(p&&(e=(e=Math.round(p/3)+"")[0]*Math.pow(10,e.length-1)),{labels:a,datasets:[{label:"Total invested",data:n,backgroundColor:r},{label:"Interest",data:i,backgroundColor:o}]});console.log("== stepSize",e),chartConfig={type:"bar",data:p,options:{tooltips:{enabled:!0,mode:"single",callbacks:{label:function(e,t){return(parseInt(e.yLabel)==principal?"Total invested: ":e.index+1<=tenure?"Interest: ":"Maturity Amount: ")+"₹"+commaSeparatorCurrency(parseFloat(e.yLabel).toFixed(2))}}},legend:{display:!1},responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{stacked:!0,gridLines:{display:!1},ticks:{display:!0}}],yAxes:[{stacked:!0,gridLines:{drawBorder:!1},ticks:{stepSize:e||5e3,callback:function(e,t,a){return convertToLacsAndCrores(e,!0)}}}]}}},window.chart=new Chart(t,chartConfig),setTimeout(function(){domElem.graphBody.classList.remove("img-loader")},200)}function commaSeparatorCurrency(e){var t,a,n,r;return+(e=e&&(e+="").replace(/,/g,""))?(t=(e+="").split(".")[1],a=(r=e.split(".")[0]).substring(r.length-3),""!=(n=r.substring(0,r.length-3))&&(a=","+a),r=n.replace(/\B(?=(\d{2})+(?!\d))/g,",")+a,null==t?r:r+"."+t):e}function createTable(){var r=domElem.amountElem.dataset.value.replace(/[^0-9]/g,"");$("#compoundTable tbody").html("");let i=0,o=12*r;var l=parseFloat(interest)/100;let c=selectedPeriod==INVESTMENTPERIOD.YEARLY?1:selectedPeriod==INVESTMENTPERIOD.QUARTERLY?4:selectedPeriod==INVESTMENTPERIOD.MONTHLY?12:365,s=0,d=0;5<=tenure?$(".table-content .resp-table").css({height:"290px"}):$(".table-content .resp-table").css({height:"auto"});for(let n=0;n<tenure;n++){var u=n+1;let t=0,e=0,a=0;if("One-time"==investmentType)i=0==n?(o=parseFloat(principal).toFixed(2),parseFloat(principal).toFixed(2)):o=null,t=r*Math.pow(1+l/c,c*u),e=t-r,s=e-d,d=e,a=parseFloat(r)+e;else{i=(12*u*r).toFixed(2);var p=principal,m=12*u;if(selectedPeriod==INVESTMENTPERIOD.YEARLY)for(let e=0;e<m;e++){var E=e+1;t+=p*Math.pow(1+l,E/12)}else if(selectedPeriod==INVESTMENTPERIOD.QUARTERLY)for(let e=0;e<4*u*12;e++){var v=e+1;v%4==0&&(t+=p*Math.pow(1+l/4,v/12))}else{var h=parseFloat(interest/100)/12,T=(c=parseInt(12*u),Math.pow(1+h,c));t=p*(T-1)*((1+h)/h)}e=t-principal*(12*u),s=e-d,d=e,a=parseFloat(principal*(12*u))+e}T=`<tr>
            <td>${u}${window.outerWidth<991?"Y":"yr"}</td>
            <td>${null==o?"-":"₹"+commaSeparatorCurrency(Math.ceil(o))}</td>
            <td  class="hidden-xs">${null==i?"-":"₹"+commaSeparatorCurrency(Math.ceil(i))}</td>
            <td>${"₹"+commaSeparatorCurrency(Math.ceil(s))}</td>
            <td class="hidden-xs">${"₹"+commaSeparatorCurrency(Math.ceil(e))}</td>
            <td>${"₹"+commaSeparatorCurrency(Math.ceil(a))}</td>
            </tr>`;$("#compoundTable tbody").append(T)}}document.querySelectorAll("input[type='number']").forEach(function(t){t.addEventListener("blur",function(e){"interest"==t.name?t.value<0&&showError(t,"Please enter valid interest"):"period"==t.name&&(t.value?+t.value<.5&&showError(t,"Please enter valid period"):showError(t,"This field is required"))})}),document.querySelectorAll(".compound-interval-control li").forEach(function(e){e.addEventListener("click",function(e){$(this).parent().siblings(".calci-label").addClass("shake"),selectedPeriod!=e.target.innerText&&(selectedPeriod=e.target.innerText,$(".compound-interval-control li.active").removeClass("active"),e.currentTarget.classList.add("active"),updateOutput()),setTimeout(()=>{$(this).parent().siblings(".calci-label").removeClass("shake")},500);e=$(this).children("span").text();trackCustomGa4Event("compounding interval time capsule",{click_text:"Compounding Interval - "+e})})}),document.querySelectorAll(".investment-type-control li").forEach(function(e){e.addEventListener("click",function(e){investmentType=e.target.innerText,$(".investment-type-control li.active").removeClass("active"),e.currentTarget.classList.add("active");let t=$("#compound_invest_range");$('input[name="amount"]').val("5,00,000"),$('input[name="amount"]').attr("data-value","500000"),$(t).val("500000");var a,e=document.querySelectorAll(".interest-tenure.compound-interval-control li");selectedPeriod=investmentType==INVESTMENTPERIOD.MONTHLY?($(".compound-interval-control .disable-element").addClass("disable-item"),$("input[name='period']").val(5),$(".input-prop.year").css({left:window.outerWidth<991?"139.68px":"134.88px"}),$(t).attr("data-max","10000000"),$(t).attr("max","10000000"),e.forEach(e=>{var t=e.querySelector("span").textContent.trim();t!=INVESTMENTPERIOD.QUARTERLY&&t!=INVESTMENTPERIOD.YEARLY||(e.classList.add("disabled"),e.classList.remove("active"),e.style.pointerEvents="none")}),INVESTMENTPERIOD.MONTHLY):($(".compound-interval-control .disable-element").removeClass("disable-item"),$("input[name='period']").val(10),$(".input-prop.year").css({left:window.outerWidth<991?"145.6px":"134.88px"}),$(t).attr("data-max","100000000"),$(t).attr("max","100000000"),e.forEach(e=>{var t=e.querySelector("span").textContent.trim();t!=INVESTMENTPERIOD.QUARTERLY&&t!=INVESTMENTPERIOD.YEARLY||(e.classList.remove("disabled"),e.style.pointerEvents="auto"),t==INVESTMENTPERIOD.YEARLY&&e.classList.add("active")}),INVESTMENTPERIOD.YEARLY),$(".compound-interval-control li").each(function(){$(this).find("span").text()===selectedPeriod?$(this).addClass("active"):$(this).removeClass("active")}),updateOutput(),e=t,a=$('input[name="amount"]').attr("data-value")/$(t).attr("max"),$(e).css("background-image","-webkit-gradient(linear, left top, right top, color-stop("+a+", #00B852), color-stop("+a+", #eaeaea))");e=$(this).children("span").text();trackCustomGa4Event("Investment time capsule",{click_text:"Investment Interval - "+e})})});